using UnitTest;

namespace LanguageTests {
    script run_static_tests() {
        var tests = new obj_unit_test("Static Tests",
                                      static_invoke,
                                      static_namespace_invoke,
                                      static_through_instance,
                                      static_through_child_instance);
        tests.run_tests();
    }

    script static_invoke() {
        test_it("type.static_script()");
        assert_equal(MathF.add(5, 10), 15);
    }

    script static_namespace_invoke() {
        test_it("namespace.type.static_script()");
        assert_equal(LanguageTests.Inner.Cow.moo(), "moo");
    }

    script static_through_instance() {
        test_it("inst.script_that_calls_static()");
        var cow = new Inner.Cow();
        assert_equal(cow.make_noise(), "moo");
    }

    script static_through_child_instance() {
        test_it("inst.script_that_calls_parent_static()");
        var calf = new Inner.Calf();
        assert_equal(calf.make_noise(), "moo");
    }

    object MathF {
        static script add(left, right) {
            return left + right;
        }
    }
}

namespace LanguageTests.Inner {
    object Cow {
        script make_noise() {
            return moo();
        }

        static script moo() {
            return "moo";
        }
    }

    object Calf : Cow {
        script call_parent() {
            return moo();
        }
    }
}